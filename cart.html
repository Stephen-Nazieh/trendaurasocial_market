<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Your Cart â€” TrendAura Social</title>
  <link rel="stylesheet" href="css/styles.css" />
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background: #fafafa; color: #222; }
    .container { max-width: 900px; margin: 0 auto; }
    h1 { margin-bottom: 20px; }
    table { width: 100%; border-collapse: collapse; margin-bottom: 20px; background:#fff; }
    th, td { padding: 12px; border-bottom: 1px solid #eee; text-align: left; }
    th { background: #f7f7f7; }
    .item-img { width: 80px; height: 80px; object-fit: cover; border-radius: 4px; }
    .total { font-size: 1.2rem; font-weight: bold; margin-top: 10px; }
    #paypal-button-container { margin-top: 20px; }
    .empty { text-align: center; margin: 40px 0; font-size: 1.1rem; }
    a.btn { display:inline-block; padding:8px 14px; background:#0077cc; color:#fff; text-decoration:none; border-radius:6px; margin-top:15px; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Your Shopping Cart</h1>

    <div id="cart-items"></div>

    <!-- PayPal button renders here -->
    <div id="paypal-button-container"></div>

    <p><a class="btn" href="shop.html">Continue Shopping</a></p>
  </div>

  <!-- PayPal SDK (replace YOUR_CLIENT_ID with your sandbox/live client id) -->
  <script src="https://www.paypal.com/sdk/js?client-id=process.env.PAYPAL_CLIENT_ID&currency=USD"></script>

  <!-- Load your PayPal client code -->
  <script src="js/paypal-client.js"></script>

  <script>
  // Render cart items from localStorage
  document.addEventListener("DOMContentLoaded", function () {
    const cartContainer = document.getElementById("cart-items");
    const cart = JSON.parse(localStorage.getItem("cart") || "[]");

    if (cart.length === 0) {
      cartContainer.innerHTML = '<p class="empty">Your cart is empty.</p>';
      return;
    }

    let html = '<table>';
    html += '<tr><th>Item</th><th>Name</th><th>Price</th><th>Quantity</th><th>Subtotal</th></tr>';

    let total = 0;

    cart.forEach(item => {
      const subtotal = item.price * item.quantity;
      total += subtotal;
      html += `
        <tr>
          <td><img class="item-img" src="${item.images?.[0] || '/assets/images/placeholder.png'}" alt="${item.title}"></td>
          <td>${item.title}</td>
          <td>$${item.price.toFixed(2)}</td>
          <td>${item.quantity}</td>
          <td>$${subtotal.toFixed(2)}</td>
        </tr>
      `;
    });

    html += '</table>';
    html += `<p class="total">Total: $${total.toFixed(2)}</p>`;
    cartContainer.innerHTML = html;
  });
  </script>
</body>
</html>
